name: build-docker-setup
description: Sets up the environment for cross platform docker build action
inputs:
  docker-path:
    description: The path to the docker directory
    required: false
    default: docker
  app-artifact-pattern:
    description: The glob pattern of the name of the uploaded app artifact (could be 'app-artifact-build' or 'app-artifact-release')
    required: false
    default: app-artifact*
runs:
  using: composite
  steps:
    - id: setup-qemu
      uses: docker/setup-qemu-action@v2
    - id: setup-buildx
      uses: docker/setup-buildx-action@v2
    - id: setup-app-artifact
      uses: actions/download-artifact@v4
      with:
        pattern: ${{ inputs.app-artifact-pattern }}
        path: ${{ inputs.docker-path }}/rootfs/opt/
        merge-multiple: true
    - id: debug
      shell: bash
      run: ls -al ${{ inputs.docker-path }}/rootfs/opt/